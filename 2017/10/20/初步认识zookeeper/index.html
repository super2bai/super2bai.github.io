<!DOCTYPE html>
<html lang="">
<head>
    <title> 初步认识zookeeper · super2bai </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="super2bai">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />





    <meta name="keywords" content="Zookeeper, Nlvi" />

<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "super2bai",
        author: "super2bai",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">









    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/tags/Dubbo/" style="font-size: 14px;">Dubbo</a> <a href="/tags/GitHub-Pages/" style="font-size: 14px;">GitHub Pages</a> <a href="/tags/IO/" style="font-size: 14px;">IO</a> <a href="/tags/JVM/" style="font-size: 14px;">JVM</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/Zookeeper/" style="font-size: 14px;">Zookeeper</a> <a href="/tags/waklup/" style="font-size: 14px;">waklup</a> <a href="/tags/walkup/" style="font-size: 14px;">walkup</a> <a href="/tags/分布式/" style="font-size: 14px;">分布式</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">super2bai</a></span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        
        
            <li class="menu-item">
                <a href="/">
                    <span>Article</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>Archives</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>Tags</span>
                    
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/about">
                    <span>About</span>
                    
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/">
                        <span>Article</span>
                        
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/archives">
                        <span>Archives</span>
                        
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>Tags</span>
                            
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/tags/Dubbo/" style="font-size: 14px;">Dubbo</a> <a href="/tags/GitHub-Pages/" style="font-size: 14px;">GitHub Pages</a> <a href="/tags/IO/" style="font-size: 14px;">IO</a> <a href="/tags/JVM/" style="font-size: 14px;">JVM</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/Zookeeper/" style="font-size: 14px;">Zookeeper</a> <a href="/tags/waklup/" style="font-size: 14px;">waklup</a> <a href="/tags/walkup/" style="font-size: 14px;">walkup</a> <a href="/tags/分布式/" style="font-size: 14px;">分布式</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/about">
                        <span>About</span>
                        
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">super2bai</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>October 20, 2017</span>
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                初步认识zookeeper
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/tags/Zookeeper/">Zookeeper</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <p><strong>初步认识zookeeper</strong></p>
<a id="more"></a>
<blockquote>
<p>zookeeper是一个开源的分布式协调服务，是由雅虎创建的，基于google chubby。</p>
</blockquote>
<p><strong>zookeeper是什么</strong></p>
<blockquote>
<p>分布式数据一致性的解决方案</p>
</blockquote>
<p><strong>zookeeper能做什么</strong></p>
<ul>
<li>数据的发布/订阅<ul>
<li>配置中心：disconf</li>
</ul>
</li>
<li>负载均衡<ul>
<li>dubbo利用zookeeper机制实现负载均衡</li>
</ul>
</li>
<li>命名服务</li>
<li>master选举<ul>
<li>kafka</li>
<li>Hadoop</li>
<li>hbase</li>
</ul>
</li>
<li>分布式队列</li>
<li>分布式锁</li>
</ul>
<p><strong>zookeeper特性</strong></p>
<ul>
<li>顺序一致性<ul>
<li>从同一个客户端发起的事务请求，最终都会严格按照顺序被应用到zookeeper中</li>
</ul>
</li>
<li>原子性<ul>
<li>所有的事务请求的处理结果在整个集群中的所有机器上的应用情况是一致的，也就是说，要么整个集群中的所有机器都成功应用了某以事务、要么全都不应用</li>
</ul>
</li>
<li>实时性<ul>
<li>一旦一个事务被成功应用，客户端就能够立即从服务端读取到事务变更后的最新数据状态<ul>
<li>zookeeper仅仅保证在一定时间内，近实时</li>
</ul>
</li>
</ul>
</li>
<li>单一视图<ul>
<li>无论客户端连接到哪个服务器，所看到的模型都是一样</li>
</ul>
</li>
<li>可靠性<ul>
<li>一旦服务器端提交了一个事务并且获得了服务器端返回成功的标识，那么这个事务所引起的服务器端的变更会一直保留</li>
</ul>
</li>
</ul>
<blockquote>
<p>Zookeeper并不是用来存储数据的，而是通过监控数据状态的变化，达到基于数据的集群管理</p>
</blockquote>
<p><strong>zookeeper安装</strong></p>
<ul>
<li>单机环境<ul>
<li><a href="https://zookeeper.apache.org/releases.html#download" target="_blank" rel="external">下载zookeeper的安装包</a></li>
<li>解压<ul>
<li><code>tar -zxvf zookeeper-xx.tar.gz</code></li>
</ul>
</li>
<li>生成zoo.cfg<ul>
<li><code>cd ZK_HOME/conf</code></li>
<li><code>cp zoo_sample.cfg zoo.cfg</code></li>
</ul>
</li>
<li>运行<ul>
<li><code>sh zkServer.sh start-foreground</code><ul>
<li>start</li>
<li>start-foreground</li>
<li>stop</li>
<li>restart</li>
<li>status</li>
<li>upgrade</li>
<li>print-cmd</li>
</ul>
</li>
</ul>
</li>
<li>客户端连接<ul>
<li><code>sh zkCli.sh -server ip:port</code></li>
</ul>
</li>
</ul>
</li>
<li>集群环境<ul>
<li>集群角色<ul>
<li>leader</li>
<li>follower</li>
<li>observer<ul>
<li><code>server.id=ip:zkPort:leaderElectionPort:observer</code></li>
<li>不参数投票，只接收投票结果</li>
<li>不属于zookeeper的关键部位</li>
<li>特殊的zookeeper节点</li>
<li>帮助解决zookeeper的扩展性<ul>
<li>如果大量客户端访问zookeeper集群，需要增加zookeeper集群机器数量。从而增加zookeeper集群性能。导致zookeeper集群写性能下降，zookeeper的数据变更需要半数以上服务器投票通过，造成网络小号增加投票成本</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>修改配置文件<ul>
<li><code>server.id=ip:zkPort:leaderElectionPort</code><ul>
<li><code>id</code>：1~255，标识该机器在集群中的机器序号</li>
<li>有几台机器就写几行</li>
</ul>
</li>
</ul>
</li>
<li>创建 <code>myid</code>文件<ul>
<li>在每一台服务器的dataDir目录下创建</li>
<li>数据内容是没太机器对应的serverId的数字</li>
</ul>
</li>
<li>启动zookeeper</li>
</ul>
</li>
</ul>
<blockquote>
<ul>
<li>客户端的写请求一定会发送到leader节点上</li>
<li>客户端的读请求，会根据算法分配到不同节点</li>
</ul>
</blockquote>

            
        
        </div>
        
            
            
        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/2017/10/21/搭建Zookeeper集群/" id="art-left" class="art-right">
                <span class="next-title">
                    搭建Zookeeper集群<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/2017/10/19/分布式基础知识/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>分布式基础知识
                </span>
            </a>
        
    </nav>

        
    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/super2bai" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2017 ~ 2018</span>
        <span>❤</span>
        <span>super2bai</span>
    </div>
    <div class="theme">
        <span>
            Powered by
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            Theme
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>
<script src="/script/search.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();
    Nlvi.picPos();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    <div class="post-toc">
        <span class="title">文章目录</span>
        <div class="toc-inner syuanpi back-1 fallIn-light">
            <li class="title-link"><a href="javascript:;" class="toTop">初步认识zookeeper</a></li>
            
        </div>
    </div>

    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
</body>
</html>
