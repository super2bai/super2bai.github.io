<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <link rel="stylesheet" href="/style/style.css">
<script>
  var nlviconfig = {
    title: "贰白",
    author: "super2bai",
    baseUrl: "/",
    theme: {
      scheme: "banderole",
      lightbox: true,
      animate: true,
      search: true,
      friends: false,
      reward: true,
      lazy: false
    }
  }
</script>




    <link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">




    <link rel="icon" href="https://wx4.sinaimg.cn/mw690/8c564d2agy1fq4rsiycy4j202c01wa9v.jpg">




<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98059014-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116557847-1');
</script>





    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="贰白">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />

  <link rel="apple-touch-icon"  sizes="72x72"  href="https://wx4.sinaimg.cn/mw690/8c564d2agy1fq4rsiycy4j202c01wa9v.jpg">
  <link rel="apple-touch-icon-precomposed"  sizes="72x72"  href="https://wx4.sinaimg.cn/mw690/8c564d2agy1fq4rsiycy4j202c01wa9v.jpg">


  <meta name="subtitle" content="苦于探索，全是未知">


  <meta name="description" content="苦于探索，全是未知">



  <meta name="keywords" content="JDK, Nlvi" />

  <title> 如何覆盖equals方法 · 贰白 </title>
</head>
<body>
  <div class="progress">
  <div class="progress-inner"></div>
</div>
  
  
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
  <div class="tagcloud-inner">
    <a href="/tags/Data-Structures/" style="font-size: 14px;">Data Structures</a> <a href="/tags/Docker/" style="font-size: 14px;">Docker</a> <a href="/tags/Dubbo/" style="font-size: 14px;">Dubbo</a> <a href="/tags/GHPages/" style="font-size: 14px;">GHPages</a> <a href="/tags/IO/" style="font-size: 14px;">IO</a> <a href="/tags/JDK/" style="font-size: 14px;">JDK</a> <a href="/tags/JVM/" style="font-size: 14px;">JVM</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MyBatis/" style="font-size: 14px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 14px;">MySQL</a> <a href="/tags/Python/" style="font-size: 14px;">Python</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/Zookeeper/" style="font-size: 14px;">Zookeeper</a> <a href="/tags/book/" style="font-size: 14px;">book</a> <a href="/tags/code/" style="font-size: 14px;">code</a> <a href="/tags/es/" style="font-size: 14px;">es</a> <a href="/tags/git/" style="font-size: 14px;">git</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/idea/" style="font-size: 14px;">idea</a> <a href="/tags/jmeter/" style="font-size: 14px;">jmeter</a> <a href="/tags/mac/" style="font-size: 14px;">mac</a> <a href="/tags/monitor/" style="font-size: 14px;">monitor</a> <a href="/tags/server/" style="font-size: 14px;">server</a> <a href="/tags/walkup/" style="font-size: 14px;">walkup</a> <a href="/tags/分布式/" style="font-size: 14px;">分布式</a> <a href="/tags/工具/" style="font-size: 14px;">工具</a> <a href="/tags/并发/" style="font-size: 14px;">并发</a> <a href="/tags/旅游/" style="font-size: 14px;">旅游</a> <a href="/tags/汇编/" style="font-size: 14px;">汇编</a> <a href="/tags/监控/" style="font-size: 14px;">监控</a> <a href="/tags/编码/" style="font-size: 14px;">编码</a>
  </div>
</div>  
  

  <div class="container">

    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn">
    <span><a href="/">贰白</a></span>
    
      <span id="subtitle">苦于探索，全是未知</span>
    
  </div>
</div>
    <nav class="main-nav">
  
  <ul class="main-nav-list syuanpi tvIn">
  
    <li class="menu-item">
      <a href="javascript:;" id="search">
        <span>搜索</span>
        
          <span class="menu-item-label">search</span>
        
      </a>
    </li>
  
  
    
      
    
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">文章</span>
        
          <span class="menu-item-label">article</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">归档</span>
        
          <span class="menu-item-label">archives</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">标签</span>
        
          <span class="menu-item-label">tags</span>
        
      </a>
    </li>
  
    
      
    
    <li class="menu-item">
      <a href="/about" id="about">
        <span class="base-name">关于</span>
        
          <span class="menu-item-label">about</span>
        
      </a>
    </li>
  
  </ul>
  
</nav>

    
    
  </div>
</header>
<div class="mobile-header">
  <div class="mobile-header-body">
    <div class="mobile-header-list">
      
        
            <div class="mobile-nav-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </div>
        
      
        
          <div class="mobile-nav-item inner-cloud">
            <div class="mobile-nav-tag">
              <a href="javascript:;" id="mobile-tags">
                <span>标签</span>
                
                    <span class="menu-item-label">tags</span>
                
              </a>
            </div>
            <div class="mobile-nav-tagcloud">
              <div class="mobile-tagcloud-inner">
                <a href="/tags/Data-Structures/" style="font-size: 14px;">Data Structures</a> <a href="/tags/Docker/" style="font-size: 14px;">Docker</a> <a href="/tags/Dubbo/" style="font-size: 14px;">Dubbo</a> <a href="/tags/GHPages/" style="font-size: 14px;">GHPages</a> <a href="/tags/IO/" style="font-size: 14px;">IO</a> <a href="/tags/JDK/" style="font-size: 14px;">JDK</a> <a href="/tags/JVM/" style="font-size: 14px;">JVM</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MyBatis/" style="font-size: 14px;">MyBatis</a> <a href="/tags/MySQL/" style="font-size: 14px;">MySQL</a> <a href="/tags/Python/" style="font-size: 14px;">Python</a> <a href="/tags/Spring/" style="font-size: 14px;">Spring</a> <a href="/tags/Zookeeper/" style="font-size: 14px;">Zookeeper</a> <a href="/tags/book/" style="font-size: 14px;">book</a> <a href="/tags/code/" style="font-size: 14px;">code</a> <a href="/tags/es/" style="font-size: 14px;">es</a> <a href="/tags/git/" style="font-size: 14px;">git</a> <a href="/tags/github/" style="font-size: 14px;">github</a> <a href="/tags/idea/" style="font-size: 14px;">idea</a> <a href="/tags/jmeter/" style="font-size: 14px;">jmeter</a> <a href="/tags/mac/" style="font-size: 14px;">mac</a> <a href="/tags/monitor/" style="font-size: 14px;">monitor</a> <a href="/tags/server/" style="font-size: 14px;">server</a> <a href="/tags/walkup/" style="font-size: 14px;">walkup</a> <a href="/tags/分布式/" style="font-size: 14px;">分布式</a> <a href="/tags/工具/" style="font-size: 14px;">工具</a> <a href="/tags/并发/" style="font-size: 14px;">并发</a> <a href="/tags/旅游/" style="font-size: 14px;">旅游</a> <a href="/tags/汇编/" style="font-size: 14px;">汇编</a> <a href="/tags/监控/" style="font-size: 14px;">监控</a> <a href="/tags/编码/" style="font-size: 14px;">编码</a>
              </div>
            </div>
          </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </div>
        
      
    </div>
  </div>
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <span class="header-menu-line"></span>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">贰白</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
</div>
    <div class="container-inner">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi fadeInUpShort back-1">
        <div class="post-time-wrapper">
          <span>2019-03-18</span>
          
            
              <span class="post-category"><a href="/categories/JDK/">JDK</a></span>
            
          
          
            
              <aside class="post-tags syuanpi fadeInUpShort back-3">
              
                <a href="/tags/JDK/">JDK</a>
              
              </aside>
            
          
        </div>
      </div>
      <h1 class="post-title syuanpi fadeInUpShort back-2">
        
          如何覆盖equals方法
        
      </h1>
    </header>
    <div class="post-content syuanpi fadeInUpShort back-3">
      
        <p>如果在List中存放了一个对象，然后用contains方法判断该对象是否存在，contains方法返回了false，气不气！</p>
<a id="more"></a>
<h3 id="时机"><a href="#时机" class="headerlink" title="时机"></a>时机</h3><ul>
<li>类具有自己特有的“逻辑相等”概念(不同于对象等同的概念)</li>
<li>超类没有覆盖equals以实现期望的行为</li>
</ul>
<blockquote>
<p>值类(value class)：仅仅表示一个值的类，例如Integer。</p>
<p>程序员在利用equals方法来比较值对象的引用时，希望知道它们在逻辑上是否相当，而不在意是否指向同一个对象。</p>
</blockquote>
<p>覆盖equal方法：可以满足程序员的要求，也可以把类的实例当作map的key，或者是set的元素。</p>
<blockquote>
<p>单例类、枚举类型不需要覆盖，逻辑相同与对象等同是一回事。</p>
</blockquote>
<h3 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h3><h4 id="自反性reflexive"><a href="#自反性reflexive" class="headerlink" title="自反性reflexive"></a>自反性reflexive</h4><p><code>x != null</code> ， <code>x.equals(x)</code>：<code>true</code></p>
<h4 id="对称性symmetric"><a href="#对称性symmetric" class="headerlink" title="对称性symmetric"></a>对称性symmetric</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">x!=<span class="keyword">null</span>,y!=<span class="keyword">null</span></div><div class="line">    <span class="keyword">if</span>(y.equals(x))&#123;</div><div class="line">        x.equals(y)：<span class="keyword">true</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="传递性transitive"><a href="#传递性transitive" class="headerlink" title="传递性transitive"></a>传递性transitive</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">x!=<span class="keyword">null</span>,y!=<span class="keyword">null</span>,z!=<span class="keyword">null</span></div><div class="line">    <span class="keyword">if</span>(x.equals(y))&#123;</div><div class="line">        <span class="keyword">if</span>(y.equals(z))</div><div class="line">            x.equals(z)：<span class="keyword">true</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="一致性consistent"><a href="#一致性consistent" class="headerlink" title="一致性consistent"></a>一致性consistent</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x!=<span class="keyword">null</span>,y!=<span class="keyword">null</span></div><div class="line">当equals比较时所用的信息没有被修改，多次调用x.equals(y)，返回值相同</div></pre></td></tr></table></figure>
<h4 id="x-null-，-x-quals-null-：-false"><a href="#x-null-，-x-quals-null-：-false" class="headerlink" title="x != null ， x.quals(null) ： false"></a><code>x != null</code> ， <code>x.quals(null)</code> ： <code>false</code></h4><h3 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h3><h4 id="自反性"><a href="#自反性" class="headerlink" title="自反性"></a>自反性</h4><blockquote>
<p>把类的实例添加到集合中，该集合的contains方法将返回false</p>
</blockquote>
<h4 id="对称性"><a href="#对称性" class="headerlink" title="对称性"></a>对称性</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CaseInsensitiveString</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String s;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CaseInsensitiveString</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (s == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.s = s;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> CaseInsensitiveString) &#123;</div><div class="line">            <span class="keyword">return</span> s.equalsIgnoreCase(((CaseInsensitiveString) o).s);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> String) &#123;</div><div class="line">            <span class="keyword">return</span> s.equalsIgnoreCase((String) o);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>String类中的equals方法不知道不区分大小写的字符串。如果将这两个对象都放在集合中，结果将不可预料，true? false? runtime exception?</p>
<p>需要将equals方法修改为下面的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> o <span class="keyword">instanceof</span> CaseInsensitiveString &amp;&amp;</div><div class="line">        ((CaseInsensitiveString) o).s.equalsIgnoreCase(s);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="传递性"><a href="#传递性" class="headerlink" title="传递性"></a>传递性</h4><blockquote>
<p>使用子类时，超类中如果新添加了一个属性，将会影响equals结果</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Point)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        Point p = (Point) o;</div><div class="line">        <span class="keyword">return</span> p.x == x &amp;&amp; p.y == y;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String color;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorPoint</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, String color)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(x, y);</div><div class="line">        <span class="keyword">this</span>.color = color;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ColorPoint没有实现equal方法，比较时，颜色信息将被忽略，不是所期望的结果。</p>
</blockquote>
<p>如果将ColorPoint中增加equals方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> ColorPoint)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        Point p = (Point) o;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.equals(o) &amp;&amp; ((ColorPoint) o).color == color;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>比较Point和ColorPoint，以及相反的情形时，可能会得到不同的结果。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Point p = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">ColorPoint cp = <span class="keyword">new</span> ColorPoint(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"red"</span>);</div><div class="line">System.out.println(p.equals(cp));<span class="comment">//true</span></div><div class="line">System.out.println(cp.equals(p));<span class="comment">//false</span></div></pre></td></tr></table></figure>
<p>修改ColorPoint的equals方法，在进行父子类比较时，忽略颜色信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> Point)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> ColorPoint)) &#123;</div><div class="line">            <span class="keyword">return</span> o.equals(<span class="keyword">this</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.equals(o) &amp;&amp; ((ColorPoint) o).color == color;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ok,对称性有保证了，但是却牺牲了传递性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    ColorPoint p1 = <span class="keyword">new</span> ColorPoint(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"red"</span>);</div><div class="line">    Point p2 = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">    ColorPoint p3 = <span class="keyword">new</span> ColorPoint(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"blue"</span>);</div><div class="line">    System.out.println(p1.equals(p2)); <span class="comment">//true,不考虑颜色</span></div><div class="line">    System.out.println(p2.equals(p3)); <span class="comment">//true,不考虑颜色</span></div><div class="line">    System.out.println(p1.equals(p3)); <span class="comment">//false,考虑颜色</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是面向对象语言中关于等价关系的一个基本问题。<strong>无法在扩展可实例化的类的同时，即增加新的属性，同时又保留equals约定。</strong></p>
<p>那尝试用<code>getClass</code>代替<code>instanceof</code>？可以扩展可实例化的类和增加新的属性，同时保留equals约定：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;   </div><div class="line">	<span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || o.getClass() != getClass()) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        Point p = (Point) o;</div><div class="line">        <span class="keyword">return</span> p.x == x &amp;&amp; p.y == y;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>只有当对象具有相同的实现时，才能使对象等同。但是实际情况如何呢？</p>
<p>假设要编写一个方法，检验某个整值点是否处于单位圆中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Set&lt;Point&gt; unitCircle;</div><div class="line"></div><div class="line"><span class="keyword">static</span> &#123;</div><div class="line">    unitCircle = <span class="keyword">new</span> HashSet&lt;Point&gt;();</div><div class="line">    unitCircle.add(<span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">0</span>));</div><div class="line">    unitCircle.add(<span class="keyword">new</span> Point(<span class="number">0</span>, <span class="number">0</span>));</div><div class="line">    unitCircle.add(<span class="keyword">new</span> Point(-<span class="number">1</span>, <span class="number">0</span>));</div><div class="line">    unitCircle.add(<span class="keyword">new</span> Point(<span class="number">0</span>, -<span class="number">1</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">onUnitCircle</span><span class="params">(Point p)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> unitCircle.contains(p);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>通过不添加属性的方式扩展Point，判断创建的实例个数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CounterPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> AtomicInteger COUNTER = <span class="keyword">new</span> AtomicInteger();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CounterPoint</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(x, y);</div><div class="line">        COUNTER.incrementAndGet();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberCreated</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> COUNTER.get();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>假设讲CounterPoint的实例传给了onUnitCircle方法。如果Point类使用了基于getClass的equals方法，无论CounterPoint实例的x和y值是什么，onUnitCircle方法都会返回false。因为在onUnitCircle方法所用的HashSet这样的集合，是利用equals方法检验包含条件，没有任何CounterPoint实例与任何Point对应。但是，如果在Point上使用适当的基于instanceof的equals方法，当遇到CounterPoint时，相同的onUnitCircle方法就会工作得很好。</p>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Liskov_substitution_principle" target="_blank" rel="external">里氏替换原则Liskov subsitution principle</a>：一个类型的任何重要属性也将适用于它的子类型，因此为该类型编写的任何方法，在它的子类型上上也应该同样运行得很好。</p>
</blockquote>
<p>虽然没有一种令人满意的办法既可以扩展不可实例化的类，又增加属性，但有一种权宜之计：复合优先于继承。改造ColorPoint：取消扩展，增加Point属性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorPoint</span> <span class="keyword">extends</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String color;</div><div class="line">    <span class="keyword">private</span> Point point;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ColorPoint</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, String color)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (Strings.isNullOrEmpty(color)) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();</div><div class="line">        &#125;</div><div class="line">        Point point = <span class="keyword">new</span> Point(x, y);</div><div class="line">        <span class="keyword">this</span>.color = color;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Point <span class="title">asPoint</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> point;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> ColorPoint)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        ColorPoint cp = (ColorPoint) o;</div><div class="line">        <span class="keyword">return</span> cp.point.equals(point) &amp;&amp; cp.color.equals(color);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在JDK中，有一些类扩展了可实例化的类，并添加了新的属性。例如<code>java.sql.Timestamp</code>对<code>java.util.Date</code>进行了扩展，并增加了<code>nanoseconds</code>属性。<code>Timestamp</code>的<code>equals</code>实现确实为了对称性，如果Timestamp和Date对象被用于同一个集合中，或者以其他方式被混合在一起，则会引起不正确的行为。Timestamp类有一个免责声明，告诫程序员不要混合使用Date和Timestamp对象。只要不混合使用，就不会有麻烦，除此之外没有其他的措施可以防止，导致的错误也很难调适。这种行为是错误的，不建议效仿。</p>
<hr>
<p><strong>用类层次代替标签类</strong></p>
<p>可以在一个抽象类的子类中增加新的值组件，而不会违反equals约定。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> radius;</div><div class="line"></div><div class="line">    Circle(<span class="keyword">double</span> radius) &#123;</div><div class="line">        <span class="keyword">this</span>.radius = radius;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Math.PI * radius;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> width;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">double</span> length;</div><div class="line"></div><div class="line">    Rectangle(<span class="keyword">double</span> width, <span class="keyword">double</span> length) &#123;</div><div class="line">        <span class="keyword">this</span>.width = width;</div><div class="line">        <span class="keyword">this</span>.length = length;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> width * length;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>只要<code>Shape</code>类不能被实例化，则上述问题均不可能发生。</p>
<h4 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h4><p>在写一个类的时候，应该仔细考虑它是否是不可变的。如果认为它应该是不可变的，就必须保证equals方法满足：相等的对象永远相等，不想等的对象永远不想等。</p>
<p><strong>无论类是否可变，都不要使equals方法依赖于不可靠的资源</strong></p>
<p>equals方法都应该对驻留在内存中的对象执行确定性的计算。</p>
<p><code>java.net.URL</code>的<code>equals</code>方法依赖于对URL中主机IP地址的比较。但IP是会变化的，会导致一些问题，但因为兼容性的考虑，equal方法无法被改变。</p>
<h4 id="非空性"><a href="#非空性" class="headerlink" title="非空性"></a>非空性</h4><p>很难想象什么场景下<code>o.equals(null)</code>会返回<code>true</code>，但抛出PNE异常倒是有可能，通常约定equals方法不抛出NPE异常，很多类会进行一个显式的判断：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(o == <span class="keyword">null</span>)&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实这是没有必要的，在进行判断之前，会将参数转换为适当的类型，以调用它的访问方法或访问其属性。在转换之前，equals方法必须使用instanceof操作符，检查参数是否为正确的类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Rectangle)) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div><div class="line">Rectangle myType = (Rectangle) obj;</div></pre></td></tr></table></figure>
<p>如果漏掉这步检查，参数又为错误的类型，则会抛出<code>ClassCastException</code>异常，这就违反了equals的约定。但是如果instanceof的第一个操作数为null，那么会返回<a href="https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.20.2" target="_blank" rel="external">指定的false</a>。</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>输出是什么？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">System.out.println(Float.NaN == Float.NaN);</div><div class="line">System.out.println(Float.compare(Float.NaN, Float.NaN));</div><div class="line">System.out.println(+<span class="number">0.0f</span> == -<span class="number">0.0f</span>);</div><div class="line">System.out.println(Float.compare(+<span class="number">0.0f</span> , -<span class="number">0.0f</span>));</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">false</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="keyword">true</span></div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure>
<blockquote>
<p>根据IEEE 754浮点“单一格式”位布局返回指定浮点值的表示形式，保留非数字（NaN）值。<br>位31（由掩码0x80000000选择的位）表示浮点数的符号。</p>
<p>位30-23（由掩码0x7f800000选择的位）表示指数。</p>
<p>位22-0（由掩码0x007fffff选择的位）表示浮点数的有效数（有时称为尾数）。<br>如果参数为正无穷大，则结果为0x7f800000。1111111100000000000000000000000<br>如果参数为负无穷大，则结果为0xff800000。</p>
<p>11111111100000000000000000000000</p>
<p>如果参数是NaN，则结果是表示实际NaN值的整数。</p>
<p>与floatToIntBits方法不同，floatToRawIntBits不会将编码NaN的所有位模式折叠为单个“规范”NaN值。<br>在所有情况下，结果都是一个整数，当赋予intBitsToFloat（int）方法时，它将生成一个与floatToRawIntBits的参数相同的浮点值。</p>
</blockquote>
<h3 id="诀窍"><a href="#诀窍" class="headerlink" title="诀窍"></a>诀窍</h3><ul>
<li>使用<code>==</code>操作符检查”参数是否为这个对象的引用”。</li>
<li>使用<code>instanceof</code>操作符检查”参数是否为正确类型”。<ul>
<li>一般情况下，正确类型为equals方法所在类</li>
<li>如果是接口，允许在实现了该接口的类之间比较，那么久使用接口(比如Set、List)。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//java.util.AbstractList</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</div><div class="line">  <span class="keyword">if</span> (o == <span class="keyword">this</span>)</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">  <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> List))</div><div class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>把参数转换为正确的类型(已经通过instanceof判断)</li>
<li><p>对于该类中的每个关键属性，检查参数中的属性是否与该对象中对应的属性匹配。</p>
<ul>
<li>非float、非double的基本类型：==</li>
<li>对象的引用属性：递归调用equals</li>
<li>float：Float.compare<ul>
<li>存在：Float.Nan、-0.0f、+0.0f</li>
</ul>
</li>
<li>double：Double.compare</li>
<li>数组<ul>
<li>按照上述原则逐个元素比较</li>
<li>Arrays.equals</li>
</ul>
</li>
<li>元素中含<code>null</code><ul>
<li>(field == null ? o.field == null : field.equals(o.field))</li>
<li>如果两个field是相同的对象引用<ul>
<li>(field == o.field || (field != null &amp;&amp; field.equals(o.field)))</li>
</ul>
</li>
</ul>
</li>
<li>定制化的类(例如忽略大小写)<ul>
<li>合理覆盖equals</li>
</ul>
</li>
</ul>
</li>
<li><p>先比较最有可能不一致的属性，或者是开销最低的属性</p>
</li>
<li>覆盖equals方法后，通过单元测试检查是否符合对称性、传递性、一致性、自反性和非空性</li>
</ul>
<h3 id="告诫"><a href="#告诫" class="headerlink" title="告诫"></a>告诫</h3><ul>
<li>覆盖equals时总要覆盖hashCode</li>
<li>不要企图让equals方法过于智能<ul>
<li>不要过度的寻求各种等价关系，比如不应该把File类指向同一个文件的符号链接当作相等的对象来看待</li>
</ul>
</li>
<li>不要将equals方法的参数类型Object替换为其他类型<ul>
<li>替换为其他类型就没有重写equals方法而是重载，相当于在Object类型外提供一个强类型的equals方法，除非这两个方法返回结果是一致的。</li>
</ul>
</li>
</ul>

      
    
    </div>
    
      
  <div class="post-reward">
    <span class="reward-btn" id="reward-btn">点这里</span>
    <div class="reward-wrapper syuanpi" id="reward-wrapper" style="display:none;">
      
      <div class="reward-item reward-alipay">
        <img src="https://wx3.sinaimg.cn/mw690/8c564d2aly1ftkt83thjlj20o60skjzn.jpg">
      </div>
      
    </div>
  </div>


      
    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/mac/audio.html" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>mac没有声音
        </span>
      </a>
    
    
      <a href="/Java/arthas.html" id="art-right" class="art-right">
        <span class="prev-title"> 
          Arthas入门<i class="iconfont icon-right"></i>  
        </span>
      </a>
    
  </nav>

    
  <i id="com-switch" class="iconfont icon-more jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
  <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
    
<!-- Gitment Comments -->
<div id="gitment"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  owner: "super2bai",
  repo: 'comment',
  oauth: {
    client_id: '37f2293730b41dcb5276',
    client_secret: 'dbab4955840d4cbc88f1563be04ab676662194e5',
  },
})
gitment.render('gitment')
</script>

    
    

  </div>


  
  
    
  
  <aside class="post-toc">
    <span class="title" id="toc-switch"><span>文章导航</span></span>
    <div class="toc-inner syuanpi back-1" style="display:none;">
      <li class="title-link"><a href="javascript:;" class="toTop">如何覆盖equals方法</a></li>
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#时机"><span class="toc-text">时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#约定"><span class="toc-text">约定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#自反性reflexive"><span class="toc-text">自反性reflexive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对称性symmetric"><span class="toc-text">对称性symmetric</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#传递性transitive"><span class="toc-text">传递性transitive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一致性consistent"><span class="toc-text">一致性consistent</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#x-null-，-x-quals-null-：-false"><span class="toc-text">x != null ， x.quals(null) ： false</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#场景"><span class="toc-text">场景</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#自反性"><span class="toc-text">自反性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对称性"><span class="toc-text">对称性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#传递性"><span class="toc-text">传递性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一致性"><span class="toc-text">一致性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#非空性"><span class="toc-text">非空性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题"><span class="toc-text">问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#诀窍"><span class="toc-text">诀窍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#告诫"><span class="toc-text">告诫</span></a></li></ol>
    </div>
  </aside>



  


        </div>
      </main>

      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/super2bai" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2017 ~ 2019</span>
        <span>❤</span>
        <span>super2bai</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>

    </div>
  </div>
</footer>
    </div>
  </div>
  <script src="/script/lib/jquery/jquery-3.2.1.min.js"></script>


  <script src="/script/lib/lightbox/js/lightbox.min.js"></script>








<script src="/script/src/nlvi.js"></script>

  <script src="/script/scheme/banderole.js"></script>

<script src="/script/bootstarp.js"></script>


<div class="backtop syuanpi melt toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>


  <div class="search" id="search">
    <div class="mask" id="mask"></div>
    <div class="search-wrapper syuanpi">
      <h2 id="search-header" class="syuanpi">找啥？</h2>
      <div class="input">
        <input type="text" id="local-search-input" results="0" name="">
      </div>
      <div id="local-search-result"></div>
    </div>
  </div>


</body>
</html>
